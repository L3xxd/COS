<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>

<AnchorPane prefHeight="600.0" prefWidth="800.0" styleClass="form-container" stylesheets="@../../../assets/css/microstyle.css" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.l3xxd.cos_alpha.controllers.dashboard.pedidos.PedidoFormController">

    <children>
        <Label layoutX="30.0" layoutY="20.0" styleClass="label-title" text="Formulario de Pedido" />

        <Label layoutX="30.0" layoutY="70.0" styleClass="label" text="Operador:" />
        <ComboBox fx:id="cmbOperador" layoutX="150.0" layoutY="65.0" prefWidth="300.0" styleClass="combo-box" />

        <Label layoutX="30.0" layoutY="120.0" styleClass="label" text="Fecha Solicitud:" />
        <DatePicker fx:id="dpFechaSolicitud" layoutX="150.0" layoutY="115.0" />

        <Label layoutX="30.0" layoutY="170.0" styleClass="label" text="Fecha Llegada:" />
        <DatePicker fx:id="dpFechaLlegada" layoutX="150.0" layoutY="165.0" />

        <Label layoutX="30.0" layoutY="220.0" styleClass="label" text="Estado:" />
        <ComboBox fx:id="cmbEstado" layoutX="150.0" layoutY="215.0" prefWidth="200.0" styleClass="combo-box">
            <items>
                <FXCollections fx:factory="observableArrayList">
                    <String fx:value="PENDIENTE" />
                    <String fx:value="COMPLETADO" />
                </FXCollections>
            </items>
        </ComboBox>

        <!-- Sección para agregar productos -->
        <Label layoutX="30.0" layoutY="260.0" styleClass="label" text="Producto:" />
        <ComboBox fx:id="cmbProducto" layoutX="150.0" layoutY="255.0" prefWidth="300.0" styleClass="combo-box" />

        <Label layoutX="470.0" layoutY="260.0" styleClass="label" text="Cantidad:" />
        <TextField fx:id="txtCantidad" layoutX="550.0" layoutY="255.0" prefWidth="80.0" promptText="0" styleClass="text-field" />

        <Button fx:id="btnAgregarProducto" layoutX="650.0" layoutY="255.0" onAction="#agregarProducto" styleClass="button" text="Agregar al pedido" />

        <!-- Tabla de detalles -->
        <TableView fx:id="tblDetalles" layoutX="30.0" layoutY="300.0" prefHeight="180.0" prefWidth="740.0" styleClass="table-view">
            <columns>
                <TableColumn fx:id="colProducto" text="Producto" />
                <TableColumn fx:id="colCantidad" text="Cantidad" />
                <TableColumn fx:id="colSubtotal" text="Subtotal" />

            </columns>
         <columnResizePolicy>
            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
         </columnResizePolicy>
        </TableView>

        <Label fx:id="lblTotal" layoutX="673.0" layoutY="43.0" text="Total: $0.00" />

        <!-- Botones de acción -->
        <HBox layoutX="30.0" layoutY="500.0" spacing="10" styleClass="action-buttons">
            <children>
                <Button fx:id="btnGuardar" onAction="#guardarPedido" styleClass="button button-primary" text="Guardar Pedido" />
            </children>
        </HBox>
    </children>
</AnchorPane>
